<?xml version='1.0' encoding='UTF-8'?>
<MotionPlanning warnings="true" warningsAsErrors="true" print="false">

  <!-- Here we specify input files, such as environment and query. -->
  <Problem>

    <Environment filename="3D/3d.env"/>

    <!--Robot label="boxy" filename="3D/boxy.robot"/-->
    <!--Robot label="links" filename="3D/linked.robot"/-->
    <Robot label="boxy" filename="3D/boxy.robot" nonholonomic="true"/>

    <Query filename="3D/3d.query"/>

    <Task label="point-to-point" robot="boxy">
      <StartConstraints>
        <!-- require an exact starting configuration -->
        <CSpaceConstraint>
          <Limit dof="0" min="0" max="0"/>
          <Limit dof="1" min="0" max="0"/>
          <Limit dof="2" min="0" max="0"/>
          <Limit dof="3" min="0" max="0"/>
          <Limit dof="4" min="0" max="0"/>
          <Limit dof="5" min="0" max="0"/>
        </CSpaceConstraint>
      </StartConstraints>

      <PathConstraints>
        <!-- no path constraints -->
      </PathConstraints>

      <GoalConstraints>
      <!--
        <CSpaceConstraint>
          <Limit dof="0" min="20" max="20"/>
          <Limit dof="1" min="5" max="5"/>
          <Limit dof="2" min="10" max="10"/>
          <Limit dof="3" min=".2" max=".2"/>
          <Limit dof="4" min=".8" max=".8"/>
          <Limit dof="5" min=".5" max=".5"/>
        </CSpaceConstraint>
      -->
      </GoalConstraints>
    </Task>

  </Problem>

  <Library>

    <DistanceMetrics>
      <WeightedEuclidean label="weuclidean" posWeight="0.4" rotWeight="0.4"
        velWeight="0.1" avlWeight="0.1"/>
      <WeightedEuclidean label="weuclidean-pos" posWeight="0.5"
        rotWeight="0.5" velWeight="0" avlWeight="0"/>
    </DistanceMetrics>

    <ValidityCheckers>
      <CollisionDetection label="rapid" method="RAPID"/>
    </ValidityCheckers>

    <NeighborhoodFinders>
      <BruteForceNF label="Nearest" dmLabel="weuclidean" unconnected="false"
        k="1"/>
      <BruteForceNF label="NearestPosition" dmLabel="weuclidean-pos"
        unconnected="false" k="1"/>
    </NeighborhoodFinders>

    <Extenders>
      <KinodynamicExtender label="FixedBest" dmLabel="weuclidean" vcLabel="rapid"
        fixed="true" best="true" minDist=".01" numSteps="20"/>
      <KinodynamicExtender label="FixedRandom" dmLabel="weuclidean" vcLabel="rapid"
        fixed="true" best="false" minDist=".01" numSteps="20"/>
      <KinodynamicExtender label="VaryBest" dmLabel="weuclidean" vcLabel="rapid"
        fixed="false" best="true" minDist=".01" numSteps="20"/>
      <KinodynamicExtender label="VaryRandom" dmLabel="weuclidean" vcLabel="rapid"
        fixed="false" best="false" minDist=".01" numSteps="20"/>
    </Extenders>

    <MapEvaluators>
      <ConditionalEvaluator label="NodesEval" metric_method="NumNodes"
        value="100" operator=">="/>
      <RRTQuery label="RRTQuery" goalDist=".3"
        nfLabel="NearestPosition" exLabel="FixedRandom" debug="false"/>
      <ComposeEvaluator label="BoundedQuery" operator="OR">
        <Evaluator label="RRTQuery"/>
        <Evaluator label="NodesEval"/>
      </ComposeEvaluator>
    </MapEvaluators>

    <Metrics>
      <NumNodesMetric label="NumNodes"/>
    </Metrics>

    <MPStrategies>
      <!-- KinodynamicRRT -->
      <BasicRRTStrategy label="KRRTQuery" growthFocus="0.05"
        dmLabel="weuclidean" nfLabel="Nearest" vcLabel="rapid"
        gtype="UNDIRECTED_TREE" extenderLabel="FixedRandom" debug="true">
        <Evaluator label="BoundedQuery"/>
      </BasicRRTStrategy>

      <!-- KinodynamicRRT -->
      <BasicRRTStrategy label="KRRTNodes" growthFocus="0.05"
        dmLabel="weuclidean" nfLabel="Nearest" vcLabel="rapid"
        gtype="UNDIRECTED_TREE" extenderLabel="FixedRandom" debug="false">
        <Evaluator label="NodesEval"/>
      </BasicRRTStrategy>
    </MPStrategies>

    <Solver mpStrategyLabel="KRRTQuery" seed="12345678"
      baseFilename="KRRT" vizmoDebug="true"/>

  </Library>
</MotionPlanning>
