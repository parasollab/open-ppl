<?xml version='1.0' encoding='UTF-8'?>
<MotionPlanning warnings="true" warningsAsErrors="true" print="false">

  <!-- Here we specify input files, such as environment and query. -->
  <Problem>

    <Environment filename="3D/3d.env"/>

    <Robot label="boxy" filename="3D/boxy.robot" nonholonomic="true"/>

    <Task label="query" robot="boxy">
      <StartConstraints>
        <CSpaceConstraint point="0 0 0 0 0 0   0 0 0 0 0 0"/>
      </StartConstraints>

      <GoalConstraints>
        <CSpaceConstraint point="20 5 10 0.2 0.8 0.5   0 0 0 0 0 0"/>
      </GoalConstraints>
    </Task>

  </Problem>

  <Library>

    <DistanceMetrics>
      <Euclidean label="euclidean"/>
      <WeightedEuclidean label="weuclidean"
        posWeight="0.4" rotWeight="0.4" velWeight="0.1" avlWeight="0.1"/>
    </DistanceMetrics>

    <ValidityCheckers>
      <CollisionDetection label="rapid"
        method="RAPID"/>
      <CollisionDetection label="pqp_solid"
        method="PQP_SOLID"/>
    </ValidityCheckers>

    <Samplers>
      <UniformRandomSampler label="UniformRandomFree"
        vcLabel="pqp_solid"/>
    </Samplers>

    <NeighborhoodFinders>
      <BruteForceNF label="NearestPosition"
        dmLabel="euclidean" unconnected="false" k="1"/>
      <BruteForceNF label="NearestState"
        dmLabel="weuclidean" unconnected="false" k="1"/>
    </NeighborhoodFinders>

    <Extenders>
      <KinodynamicExtender label="FixedBest"
        dmLabel="weuclidean" vcLabel="rapid" numSteps="10"
        fixed="true" best="true" minDist=".01"/>
      <KinodynamicExtender label="FixedRandom"
        dmLabel="weuclidean" vcLabel="rapid" numSteps="10"
        fixed="true" best="false" minDist=".01"/>
      <KinodynamicExtender label="VaryBest"
        dmLabel="weuclidean" vcLabel="rapid" numSteps="10"
        fixed="false" best="true" minDist=".01"/>
      <KinodynamicExtender label="VaryRandom"
        dmLabel="weuclidean" vcLabel="rapid" numSteps="30"
        fixed="false" best="false" minDist=".01"/>

      <MixExtender label="KinoExtender">
        <Extender label="FixedBest" probability=".5"/>
        <Extender label="FixedRandom" probability=".5"/>
        <Extender label="VaryBest" probability="1"/>
        <Extender label="VaryRandom" probability="1"/>
      </MixExtender>
    </Extenders>

    <MapEvaluators>
      <ConditionalEvaluator label="NodesEval"
        metric_method="NumNodes" value="8000" operator=">="/>
      <RRTQuery label="RRTQuery"
        goalDist="5" nfLabel="NearestPosition" exLabel="FixedRandom"
        fullRecreatePath="false" debug="false"/>
      <ComposeEvaluator label="BoundedRRTQuery"
        operator="OR">
        <Evaluator label="RRTQuery"/>
        <Evaluator label="NodesEval"/>
      </ComposeEvaluator>
    </MapEvaluators>

    <Metrics>
      <NumNodesMetric label="NumNodes"/>
    </Metrics>

    <MPStrategies>
      <BasicRRTStrategy label="RRT"
        growthFocus="0.01" dmLabel="weuclidean" nfLabel="NearestState"
        vcLabel="rapid" extenderLabel="KinoExtender" gtype="DIRECTED_TREE"
        growGoals="false" debug="false">
        <Evaluator label="BoundedRRTQuery"/>
      </BasicRRTStrategy>

      <DynamicDomainRRT label="DynamicDomainRRT"
        growthFocus="0.01" dmLabel="weuclidean" nfLabel="NearestState"
        vcLabel="rapid" extenderLabel="KinoExtender" gtype="DIRECTED_TREE"
        growGoals="false" r="2" debug="false">
        <Evaluator label="BoundedRRTQuery"/>
      </DynamicDomainRRT>

      <DynamicRegionRRT label="DynamicRegionRRT"
        growthFocus="0.01" dmLabel="weuclidean" nfLabel="NearestState"
        vcLabel="rapid" extenderLabel="KinoExtender" gtype="DIRECTED_TREE"
        growGoals="false" debug="false">
        <Evaluator label="BoundedRRTQuery"/>
      </DynamicRegionRRT>

    </MPStrategies>

    <Solver mpStrategyLabel="RRT" seed="12345678" baseFilename="KRRT"
      vizmoDebug="false"/>

  </Library>

</MotionPlanning>
