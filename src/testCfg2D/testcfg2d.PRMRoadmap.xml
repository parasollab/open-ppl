<?xml version='1.0' encoding='UTF-8'?>
<motion_planning>
  <MPProblem>
    <environment input_env="passage.env">
      <robot Cfg_name="Cfg_2D" num_joints="0" pos_dof="2" dofs="6"> 
      	<boundary type="bbox" translational_scale="1">
      	  <parameter id="0" Label="x" type="translational" min="-25" max="25" />
      	  <parameter id="1" Label="y" type="translational" min="-40" max="40" />
      	  <parameter id="2" Label="z" type="translational" min="-2" max="5" />
      	</boundary>
      </robot>
      <!-- <resolution pos_res="0.05" ori_res="0.05" / let the MP compute it-->
    </environment>
    <distance_metrics>
      <scaledEuclidean scale="0.5"/>
    </distance_metrics>    
    <validity_test>  <!-- (cd1 & cd2) || !(cd2 || cd3)-->    
      <CollisionDetection Label="cd1" method="RAPID" />
      <CollisionDetection Label="cd2" method="PQP" />
      <CollisionDetection Label="cd3" method="VCLIP" />
      <!--JointLimit Label="jl" min="0.1" max="1.0"/-->      
      <ComposeValidity Label="com1" operator="and">
	      <vc_method method="cd1" />
	      <vc_method method="cd2" />
      </ComposeValidity>
      <ComposeValidity Label="com2" operator="or">
		    <vc_method method="cd2" />
		    <vc_method method="cd3" />
      </ComposeValidity>
      <NegateValidity Label ="notcom2" method ="com2" />
      <ComposeValidity Label="com3" operator="or">
	      <vc_method method="com1" />
	      <vc_method method="com2" />
      </ComposeValidity>      
    </validity_test>
    <NeighborhoodFinder>
      <BFNF Label="BFNF"/>
      <DPESNF Label="DPESNF"/>
      <MPNNNF Label="MPNNNF" epsilon="0.0" use_scaling="1" use_rotational="1" max_points="50000" max_k="1000" />
      <CGALNF Label="CGALNF" epsilon="0.0" use_scaling="1" />
      <STNF Label="STNF" />
      <MTNF Label="MTNF" />
    </NeighborhoodFinder>
    <MPRegions/>
  </MPProblem>
  
  <MPStrategy>  
    <node_generation_methods>
      <UniformRandomSampler Label="UniformRandom" vc_method="cd1" />
      <UniformRandomFreeSampler Label="UniformRandomFree" vc_method="cd1" />
      <UniformRandomCollisionSampler Label="UniformRandomCollision" vc_method="cd1" /> 
      <ObstacleBasedSampler Label="ObstacleBased" vc_method="cd1">
	      <num_nodes number="100" exact="1"/>
	      <shells number="3"/>
	      <n_shells_coll number="1"/>
	      <n_shells_free number="1"/>
      </ObstacleBasedSampler> 
      <FreeMedialAxisSampler Label="FreeMedialAxis" vc_method="cd1">
	      <num_nodes number="100" exact="1"/>
	      <clearance number="10"/>
	      <penetration number="5"/>
      </FreeMedialAxisSampler> 
      <GaussRandomCollisionSampler Label="GaussRandomCollision"  vc_method="cd1">
        <gauss_d number="1"/>
      </GaussRandomCollisionSampler>
      <GaussRandomFreeSampler Label="GaussRandomFree"  vc_method="cd1">
        <gauss_d number="1"/>
      </GaussRandomFreeSampler>
      <BridgeTestRandomFreeSampler Label="BridgeTestRandomFree"  vc_method="cd1">
        <bridge_d number=".1"/>
      </BridgeTestRandomFreeSampler>
    </node_generation_methods>
      
    <connection_methods>
      <NeighborhoodConnection Label="Closest" nf="BFNF" k="10" CheckIfSameCC="false" />
      <NeighborhoodConnection Label="ClosestSF" nf="BFNF" k="10" fail="3" CheckIfSameCC="false" />
      <NeighborhoodConnection Label="ConnectFirst" nf="BFNF" k="1" unconnected="true" CheckIfSameCC="false" />
      <NeighborhoodConnection Label="ClosestUnconnected" nf="BFNF" k="10" unconnected="true" CheckIfSameCC="false" />
      <NeighborhoodConnection Label="AllPairs" nf="BFNF" k="0" CheckIfSameCC="false" />
      <ConnectCCs Label="ConnectCCs" smallcc="5" kpairs="2" />
    </connection_methods>

    <lp_methods>
      <straightline Label="sl" length="0" binary_search="1" vc_method="cd1"/>
    </lp_methods>
    
    <MPEvaluator_methods> <!-- MPStrategy constructor: done -->
      <MPRegionComparers> <!-- MapEvaluator:ParseXMLComparers: done  -->
	      <ConnectableComponentComparer Label="ConnectableComponent" /> <!-- ConnectableComponentComparer:done -->
	      <RandomConnectComparer Label="RandomQuery" number_of_configurations="100"/>
      </MPRegionComparers> <!-- MapEvaluator: -->
    </MPEvaluator_methods>
    
    <MPCharacterizer>
      <LocalNodeInfoCharacterizer Label="LocalNodeInfo" radius="2"/>
    </MPCharacterizer>
    
    <MPStrategyMethod Controller="PRM1">
      <PRMRoadmap Label="PRM1" iterations="1" filename="PRMRoadmap_cfg2d" seed="111111" num_samples="302">
	      <!--><node_generation_method Method="UniformRandomFree"/><-->
	      <node_generation_method Method="FreeMedialAxis"/>
	      <node_connection_method Method="Closest"/>
	      <!--><component_connection_method Method="ConnectCCs"/><-->
	      <lp_method Method="sl"/> 
      </PRMRoadmap>
    </MPStrategyMethod>
  </MPStrategy>
</motion_planning>

