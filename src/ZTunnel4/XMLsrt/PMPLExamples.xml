<?xml version='1.0' encoding='UTF-8'?>
<MotionPlanning>
  <MPProblem>

    <Environment filename="z_tunnel.env"/>

    <DistanceMetrics>
      <Euclidean label="euclidean"/>
    </DistanceMetrics>    

    <ValidityCheckers>    
      <CollisionDetection label="cd1" method="RAPID"/>
      <CollisionDetection label="cd4" method="PQP_SOLID"/>
      <AlwaysTrueValidity label="alwaysTrue"/>
    </ValidityCheckers>

    <NeighborhoodFinders>
      <BruteForceNF label="BFNF" dmLabel="euclidean" unconnected="false" k="5"/>
      <BruteForceNF label="BFNF50" dmLabel="euclidean" unconnected="false" k="50"/>
      <BruteForceNF label="Nearest" dmLabel="euclidean" unconnected="false" k="1"/>
      <BruteForceNF label="BFNFAll" dmLabel="euclidean" k="0"/>
    </NeighborhoodFinders>
    
    <Samplers>
      <UniformRandomSampler label="UniformRandom" vcLabel="alwaysTrue"/>
      <UniformRandomSampler label="UniformRandomFree" vcLabel="cd4"/>
      <ObstacleBasedSampler label="OBPRM" vcLabel="cd4" useBBX="true" pointSelection="cspace" 
        dmLabel="euclidean" stepSize="0.05" nShellsColl="0" nShellsFree="1" debug="false"/>
      <GaussianSampler label="Gauss" vcLabel="cd4" d="1" dmLabel="euclidean" useBBX="false"/>
    </Samplers>

    <LocalPlanners>
      <StraightLine label="sl" binaryEvaluation="true" vcLabel="cd4"/>
      <StraightLine label="slAlwaysTrue" binaryEvaluation="true" vcLabel="alwaysTrue"/>
    </LocalPlanners>

    <Connectors>
      <CCsConnector label="ConnectCCs" nfLabel="BFNF" lpLabel="sl" k="5" smallcc="5"/>
      <NeighborhoodConnector label="Closest" nfLabel="BFNF" lpLabel="sl" checkIfSameCC="false" debug="false"/>
      <NeighborhoodConnector label="ToggleRRTConnector" nfLabel="Nearest" lpLabel="sl" checkIfSameCC="true"/>
      <NeighborhoodConnector label="ToggleConnectValid" nfLabel="BFNF" lpLabel="sl" countFailures="true" fail="1"
        checkIfSameCC="false"/>
      <NeighborhoodConnector label="ToggleConnect" nfLabel="BFNF" lpLabel="sl" countFailures="true" fail="1" CheckIfSameCC="false"/>
      <NeighborhoodConnector label="LazyToggleConnect" nfLabel="BFNF50" lpLabel="sl" countFailures="true"
        fail="1" CheckIfSameCC="false"/>
      <NeighborhoodConnector label="ClosestAlwaysTrue" nfLabel="BFNF" lpLabel="slAlwaysTrue" checkIfSameCC="false"/>
      <NeighborhoodConnector label="AllToAll" nfLabel="BFNFAll" lpLabel="sl" checkIfSameCC="false"/>
    </Connectors>

    <Metrics>
      <NumNodesMetric label="NumNodes"/>
    </Metrics>

    <MapEvaluators>
      <Query label="Query" queryFile="z_tunnel.query" pathFile="Basic.path" dmMethod="euclidean" lpMethod="sl"
        smooth="true" smoothFile="smooth.path" debug="false" recordKeep="true" vcMethod="cd4">
        <NodeConnectionMethod method="Closest"/>
        <SmoothConnectionMethod method="AllToAll"/>
      </Query>
      <ConditionalEvaluator label="FreqNodeEval" metric_method="NumNodes" value="10" operator="%"/>
      <ComposeEvaluator label="ModQuery" operator="and">
        <Evaluator label="FreqNodeEval"/>
        <Evaluator label="Query"/>
      </ComposeEvaluator>
    </MapEvaluators>

    <MPStrategies>
      <BasicRRTStrategy label="RRT" delta="5" minDist="0.05"
        numRoots="1" m="1" growthFocus="0.01" lpLabel="sl" dmLabel="euclidean"
        nfLabel="BFNF" vcLabel="cd4" query="z_tunnel.query" gtype="UNDIRECTED_TREE" debug="false" evaluateGoal="true"
        recordKeep="true">
      </BasicRRTStrategy>
      <SRTStrategy label="SRT" delta="5" minDist="0.1"
        lpLabel="sl" dmLabel="euclidean" nfLabel="Nearest" vcLabel="cd4"
        query="z_tunnel.query" gtype="UNDIRECTED_GRAPH" debug="false" recordKeep="true"
        samples="400" expansions="10" closeCent="15" randCent="8" closePairs="20" connIter="100">
        <Evaluator label="ModQuery"/>
      </SRTStrategy>
    </MPStrategies>

    <Solver mpStrategyLabel="SRT" seed="0" baseFilename="SRT/SRT" vizmoDebug="true" recordKeep="true"/>

  </MPProblem>
</MotionPlanning>
